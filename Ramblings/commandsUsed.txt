Day One:
    Initiate App:
        django-admin startproject coffee_stained_map
        cd coffee_stained_map
        python manage.py startapp cafes

        -Added app to settings/installed_apps

    Setting Up Postgres:
        psql -U cianan
        CREATE DATABASE coffee_stained_map;
        \c coffee_stained_map
        CREATE EXTENSION postgis;

        -Added db info to settings.py

    -Creating a cafe model

    -Importing data from cafes.csv
        import csv
        from cafes.models import Cafe
        from django.contrib.gis.geos import Point

        with open('cafes.csv', newline='', encoding='utf-8') as csvfile:
            reader = csv.DictReader(csvfile)
            for row in reader:
                name = row['name']
                address = row['address']
                lon = float(row['longitude'])
                lat = float(row['latitude'])
                rating = float(row['rating'])
                location = Point(lon, lat)
                
                Cafe.objects.create(
                    name=name,
                    address=address,
                    location=location,
                    rating=rating
                )

import csv
from cafes.models import Cafe
from django.contrib.gis.geos import Point

with open('data/cafes.csv', newline='', encoding='utf-8') as csvfile:
    reader = csv.reader(csvfile)
    next(reader)  # skip the header row
    for row in reader:
        name, address, lon, lat, rating = row
        Cafe.objects.create(
            name=name,
            address=address,
            location=Point(float(lon), float(lat)),
            rating=float(rating)
        )

print("Sample cafes loaded!")

model hadnt properly migrated:  
    python manage.py makemigrations cafes
    python manage.py migrate

    verify:
        python manage.py shell
        from cafes.models import Cafe
        Cafe.objects.all() 

        it worked!

re-tried:
    import csv
    from cafes.models import Cafe
    from django.contrib.gis.geos import Point

    with open('data/cafes.csv', newline='', encoding='utf-8') as csvfile:
        reader = csv.reader(csvfile)
        next(reader)  # skip the header row
        for row in reader:
            name, address, lon, lat, rating = row
            Cafe.objects.create(
                name=name,
                address=address,
                location=Point(float(lon), float(lat)),
                rating=float(rating)
            )


    SAMPLE CAFE LOADED!

    verify data:    
        from cafes.models import Cafe
        from django.contrib.gis.geos import Point
        from django.contrib.gis.db.models.functions import Distance

        my_location = Point(-6.26, 53.34, srid=4326)

        nearby_cafes = (
            Cafe.objects
            .annotate(distance=Distance('location', my_location))
            .order_by('distance')
        )

        for cafe in nearby_cafes:
            print(cafe.name, cafe.distance.m)  # distance in meters


Configuring Rest Framework: 
    Adding to settings.py -> output will be geojson not json

Created serializer in cafes:
    makes Django REST Framework auto-output geojson geometry features for each cafe.

Created a view:
    readonly access for api endpoint. lets you read all cafes

Made cafe/urls.py

